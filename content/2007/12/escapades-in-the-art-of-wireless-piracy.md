Title: Escapades in the Art of Wireless Piracy
Date: 2007-12-02
Modified: 2012-09-15
Tags: wireless, linksys, firmware, dd-wrt, router
Slug: escapades-in-the-art-of-wireless-piracy

As the Macbooks don't come with PCMCIA or Express card slots, I'm unable to use my old Proxim card for less than savory acts of wireless piracy. I haven't been able to find any USB wifi dongles that please me, so I decided to go another route.

The <a href="http://www.dd-wrt.com/">DD-WRT</a> project is alternative firmware that turns your <a href="http://www.dd-wrt.com/wiki/index.php/Supported_Devices" >supported consumer wireless AP</a> into an untamed beast. More to the point, it allows the AP to act as a repeater -- hijacking a current signal, boosting it, and rebroadcasting. For the hardware, I bartered for a Linksys WRT54GL (v1.1) at the Bay of E. The device is supported, and has two <a href="http://wireless.gumph.org/content/3/7/011-cable-connectors.html" >RP-TNC jacks</a>, allowing me to replace the default antennas with two of my uncommonly large spikes.

Despite the labyrinth of convoluted, contradictory information that is the <a href="http://www.dd-wrt.com/wiki/index.php/Main_Page" >DD-WRT wiki</a>, installation was quite simple. First, I reset the router to factory defaults through the web interface. It was new out of the box, so I imagine already set to factory defaults, but who knows. The wiki suggests the first flash of the WRT54GL be with the mini firmware, but, after that, it can be flashed to <a href="http://www.dd-wrt.com/wiki/index.php/What_is_DD-WRT%3F#File_Versions" >any other version</a>. So, I downloaded both dd-wrt.v23_sp2_mini.zip and dd-wrt.v23_sp2_standard.zip. The wiki also claims that Firefox may fubar the upgrade and suggests using IE in its stead. Not having access to IE, I went to flash dd-wrt.v23_mini_generic.bin through the web interface using Safari, which promptly failed. The router's default firmware was in no way damaged, so I went to do the same thing again in Firefox (2.0.0.11), which worked without a hitch. Giving no explanation as to why, the wiki suggests that after one arrives at the "Upgrade Successful" screen, one should wait for the esoteric count of 5 minutes before hitting continue (perhaps while chanting some manner of incantation). I did this (minus the chanting), hit continue, and was greeted by a login prompt. The default user/pass of root/admin didn't work, so I held down the reset switch on the back of the router for 30 seconds (leaving the power cord plugged in), after which the router booted up, accepted the root/admin login, and all was shiny. After that, I upgraded to the standard firmware without note, and quickly realized that I actually needed the v24 beta firmware. So, I grabbed dd-wrt.v24_std_generic.bin, upgraded to that (again without problem), and was finally ready to turn it into <a href="http://www.dd-wrt.com/wiki/index.php/Wlan_Repeater" >a repeater</a>.

To set it up, I first changed the router's IP to 192.168.69.1, so that it was on a different subnet than my target. Next, under Wireless Basic Settings, I changed the mode to Repeater, entered the target SSID, and changed the wireless channel to Auto, leaving all the other settings on their defaults. After saving those settings, I added a virtual interface with my own SSID and made sure it was set to Bridged. Then, after saving that, I followed the wiki's advice to go to the Security tab, uncheck everything under Block WAN Requests and disabled the firewall. That was it. The router had a WAN IP displayed in the upper right hand corner, indicating that it was working.

Note that up till here, I was doing everything on the router through a wired connection, which was strongly urged in many places and seemed wise to me. At this point, I unplugged the cat5, turned on my Airport, connected to my new AP, and was online immediately.
