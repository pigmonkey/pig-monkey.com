ServerRoot "/home/pigmonkey/webapps/pigmonkey_python/apache2"

LoadModule dir_module        modules/mod_dir.so
LoadModule env_module        modules/mod_env.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule mime_module       modules/mod_mime.so
LoadModule rewrite_module    modules/mod_rewrite.so
LoadModule setenvif_module   modules/mod_setenvif.so
LoadModule wsgi_module       modules/mod_wsgi.so

LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
CustomLog /home/pigmonkey/logs/user/access_pigmonkey_python.log combined
ErrorLog /home/pigmonkey/logs/user/error_pigmonkey_python.log
KeepAlive Off
Listen 26769
MaxSpareThreads 3
MinSpareThreads 1
ServerLimit 1
SetEnvIf X-Forwarded-SSL on HTTPS=1
ThreadsPerChild 5
WSGIScriptAlias / /home/pigmonkey/work/projects/pig-monkey.com/deploy/wsgi.py
WSGIDaemonProcess pigmonkey_python processes=5 python-path=/home/pigmonkey/work/projects/pig-monkey.com:/home/pigmonkey/webapps/pigmonkey_python/lib/python2.7 threads=1
WSGIProcessGroup pigmonkey_python
WSGIRestrictEmbedded On
WSGILazyInitialization On

RewriteEngine On
RewriteCond %{HTTP:X-Forwarded-SSL} !on
RewriteCond %{REQUEST_URI} ^/admin
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [R,L]
